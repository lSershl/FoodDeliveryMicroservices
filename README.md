# Описание
Проект был создан для изучения микросервисной архитектуры. Приложение в данном проекте имитирует работу сервиса по заказу и доставке еды. Пользователь выбирает еду из каталога, оформляет заказ и далее отслеживает его статус в реальном времени (для этого применяется SignalR подключение). Все ключевые процессы разделены на отдельные микросервисы, которые передают информацию друг другу через MassTransit и RabbitMQ (сервисы независимы друг от друга, объекты для передачи представлены в виде DTO). Все запросы от пользователя к микросервисам перенаправляются посредством YARP. Оркестрация проектов и контейнеров осуществляется через Aspire.

# Схема проекта
![Cхема проекта](schema.png)


- Запросы от пользователя перенаправляются через YARP
- Сервис `Identity` проводит аутентификацию пользователя и возвращает JWT токен, чтобы пользователь мог в дальнейшем сохранять корзину, отслеживать текущий заказ и просматривать историю заказов
- Сервис `Catalog` выгружает список товаров из БД и передаёт в клиент (браузер) пользователя для отображения
- Сервис `Basket` сохраняет корзину пользователя с товарами, при оформлении заказа имитирует списание платы и передаёт сообщение об оформлении заказа в сервис `Ordering` через RabbitMQ
- Сервис `Ordering` принимает заказ и имитирует его приготовление, далее меняет статус заказа и передаёт сообщение о готовности в сервис `Delivery`
- Сервис `Delivery` принимает сообщения о создании и изменении заказа, имитирует доставку заказа и меняет статус заказа на соответствующий

# Требования для запуска
1) Visual Studio 2022 (я использовал Preview версию и .Net 8)
2) Docker

# Запуск приложения
1) Клонировать репозиторий и открыть файл `FoodDelivery.sln`
2) Запустить Docker
3) В Visual Studio выбрать для запуска проект `FoodDelivery.AppHost`
4) Запустить приложение, перейти на страницу web-client в интерфейсе Aspire или по адресу: https://localhost:7047/
6) Войти по логину `+79012223344` и паролю `test` (можно создать отдельный аккаунт пользователя по кнопке `Регистрация`)

Для проверки передачи сообщений между микросервисами можно войти в панель администрирования RabbitMQ по адресу через интерфейс Aspire (логин и пароль можно узнать в деталях контейнера)

# Лог изменений
- 06.10.24 - первая рабочая версия проекта
- 30.01.25 - смена оркестровки, вместо запуска нескольких проектов в VS и контейнеров через docker-compose теперь используется Aspire